    processor 18F8722
    config OSC=HS, WDT=OFF, LVP=OFF
    radix decimal
    org 0x00
    
LATA equ 0xF89 
TRISA equ 0xF92 
PORTA equ 0xF80
LATB equ 0xF8A 
TRISB equ 0xF93 
PORTB equ 0xF81
LATC equ 0xF8B 
TRISC equ 0xF94 
PORTC equ 0xF82
LATF equ 0xF8E 
TRISF equ 0xF97 
PORTF equ 0xF85
LATH equ 0xF90 
TRISH equ 0xF99 
PORTH equ 0xF87
LATJ equ 0xF91 
TRISJ equ 0xF9A 
PORTJ equ 0xF88
ADCON1 equ 0xFC1
 
    MOVLW 15
    MOVWF ADCON1;SETUP ADCON
    ;SETUP TRIS
    MOVLW B'11111111'
    MOVWF TRISC
    MOVWF TRISB
    MOVWF TRISJ
    
    MOVLW B'00000000'
    MOVWF TRISF
    
    MOVLW B'11110000'
    MOVWF TRISH
    
    MOVLW B'11101111'
    MOVWF TRISA
    
    
    ;SETUP VARIABLES
DC1 EQU 0X01
DC2 EQU 0X02
DC3 EQU 0X03
LSWITCHES EQU 0X04
RSWITCHES EQU 0X05
 
MAIN
    CALL GETSWITCHES
    MOVF LSWITCHES, W
    SUBWF RSWITCHES;IF R>L THEN THIS IS NEGATIVE
    BN FLASHLED8; IF NEGATIVE, FLASH
    ;ELSE, LOOP AND TEST AGAIN
    BRA MAIN
    
DELAY500US
    MOVLW 178
    MOVWF DC1;SET COUNTER
INNERLOOP1
    NOP
    NOP      ;DO NOTHING
    NOP
    NOP
    DECF DC1;DECREASE COUNTER
    BNZ INNERLOOP1;IF COUNTER NOT ZERO, LOOP
    RETURN
    
DELAY50MS
    MOVLW 100
    MOVWF DC2
INNERLOOP2
    CALL DELAY500US
    DECF DC2
    BNZ INNERLOOP2
    RETURN
    
DELAY150MS
    MOVLW 3
    MOVWF DC3
INNERLOOP3
    CALL DELAY50MS
    DECF DC3
    BNZ INNERLOOP3
    RETURN
    
GETSWITCHES
    MOVFF PORTH, LSWITCHES
    MOVLW B'11110000';7654 NEEDED
    ANDWF LSWITCHES;CLEAR UNWANTED DATA
    RRNCF LSWITCHES,F
    RRNCF LSWITCHES,F
    RRNCF LSWITCHES,F
    RRNCF LSWITCHES,F
    
    
    ;NOW RIGHT SWITCHES FROM PORTC
    MOVFF PORTC, RSWITCHES
    ;2345 NEEDED
    MOVLW B'00111100'
    ANDWF RSWITCHES
    RRNCF RSWITCHES,F
    RRNCF RSWITCHES,F
    RETURN
    
FLASHLED8
    MOVLW B'10000000'
    MOVWF LATF;SET DATA
    
    MOVLW B'00000011';SEGS OFF
    MOVWF LATH
    MOVLW B'00010000';LED ON
    MOVWF LATA
    CALL DELAY150MS;DELAY
    MOVLW B'00000000';LED OFF
    MOVWF LATA
    CALL DELAY150MS;DELAY AGAIN
    RETURN
    
    
    end
